<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Carrito de Compras - Arrow Functions</title>
<style>
body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
.producto { border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 8px; }
.total { font-size: 1.5em; font-weight: bold; color: #28a745; }
button { background: #007bff; color: white; border: none; padding: 8px 16px;
border-radius: 4px; cursor: pointer; }
button:hover { background: #0056b3; }
.eliminar { background: #dc3545; }
.eliminar:hover { background: #c82333; }
</style>
</head>
<body>
<h1>Carrito de Compras con Arrow Functions</h1>
<div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom:
20px;">
<h3>AÃ±adir Producto</h3>
<input type="text" id="nombre" placeholder="Nombre del producto" style="margin-right:
10px; padding: 8px;">
<input type="number" id="precio" placeholder="Precio (â‚¬)" step="0.01"
style="margin-right: 10px; padding: 8px;">
<button onclick="aÃ±adirProducto()"> AÃ±adir</button>
</div>
<div id="listaProductos"></div>
<div id="totalContainer" style="margin-top: 20px; text-align: right;"></div>
<script>
// ðŸ“¦ Estado de la aplicaciÃ³n (datos del carrito)
let carrito = [];
// ================================
// ðŸ”¹ FUNCIONES FLECHA PRINCIPALES
// ================================
// 1. AÃ‘ADIR PRODUCTO AL CARRITO
const aÃ±adirProducto = () => {
const nombre = document.getElementById('nombre').value.trim();
const precio = parseFloat(document.getElementById('precio').value);
// ValidaciÃ³n
if (!nombre || precio <= 0 || isNaN(precio)) {
alert('âŒ Introduce nombre y precio vÃ¡lido');
return;
}
// Verificar si el producto ya existe (por nombre) y aumentar cantidad
const productoExistente = carrito.find(p => p.nombre.toLowerCase() === nombre.toLowerCase());
if (productoExistente) {
productoExistente.cantidad += 1;
} else {
// Crear nuevo producto
const nuevoProducto = {
id: Date.now(), // ID Ãºnico
nombre,
precio,
cantidad: 1
};
// AÃ±adir al carrito
carrito.push(nuevoProducto);
}
// Limpiar formulario
document.getElementById('nombre').value = '';
document.getElementById('precio').value = '';
// Actualizar vista
renderizarCarrito();
};
// 2. ELIMINAR PRODUCTO
const eliminarProducto = (id) => {
// Usamos filter para crear un nuevo array sin el producto con el ID especificado
carrito = carrito.filter(producto => producto.id !== id);
renderizarCarrito();
};
// 3. CAMBIAR CANTIDAD
const cambiarCantidad = (id, nuevaCantidadStr) => {
const nuevaCantidad = parseInt(nuevaCantidadStr);
// ValidaciÃ³n bÃ¡sica
if (isNaN(nuevaCantidad) || nuevaCantidad < 1) {
// Si la entrada no es vÃ¡lida o es menor a 1, renderizamos para mantener el valor actual o forzar a 1
renderizarCarrito(); 
return;
}
// Encontrar el producto y actualizar su cantidad
const producto = carrito.find(p => p.id === id);
if (producto) {
producto.cantidad = nuevaCantidad;
renderizarCarrito();
}
};
// 4. CALCULAR TOTALES
const calcularTotales = () => {
const totalProductos = carrito.reduce((total, producto) => total + producto.cantidad,
0);
// Sumar el precio total de cada producto (precio * cantidad)
const totalPrecio = carrito.reduce((total, producto) => total + (producto.precio * producto.cantidad), 0);
return { totalProductos, totalPrecio: totalPrecio.toFixed(2) };
};
// 5. VACIAR CARRITO
const vaciarCarrito = () => {
if (confirm('Â¿Vaciar todo el carrito?')) {
carrito = [];
renderizarCarrito();
}
};
// 6. RENDERIZAR CARRITO (FUNCIÃ“N PRINCIPAL)
const renderizarCarrito = () => {
const lista = document.getElementById('listaProductos');
const containerTotal = document.getElementById('totalContainer');
// Si estÃ¡ vacÃ­o
if (carrito.length === 0) {
lista.innerHTML = '<p style="text-align: center; color: #6c757d;">ðŸ›’ Carrito vacÃ­o. Â¡AÃ±ade productos!</p>';
containerTotal.innerHTML = '';
return;
}
// Generar HTML con map
const productosHTML = carrito.map(producto => `
<div class="producto">
<strong>${producto.nombre}</strong>
<span style="float: right;">
${producto.precio.toFixed(2)}â‚¬ x
<input type="number" value="${producto.cantidad}"
min="1" max="99"
onchange="cambiarCantidad(${producto.id}, this.value)"
style="width: 50px; text-align: center;">
= ${(producto.precio * producto.cantidad).toFixed(2)}â‚¬
</span>
<br><br>
<button class="eliminar" onclick="eliminarProducto(${producto.id})">
Eliminar</button>
</div>
`).join('');
lista.innerHTML = productosHTML;
// Mostrar totales
const totales = calcularTotales();
containerTotal.innerHTML = `
<p>ðŸ“¦ Productos: ${totales.totalProductos}</p>
<p class="total">ðŸ’° Total: ${totales.totalPrecio}â‚¬</p>
<button onclick="vaciarCarrito()" style="background: #ffc107; color: #212529;">
Vaciar Carrito</button>
`;
};
// Inicializar la vista al cargar la pÃ¡gina
document.addEventListener('DOMContentLoaded', renderizarCarrito);
</script>
</body>
</html>